# 3.1 Guard 子句

通过`when`关键字可以指定哨兵子句

```
def function_name(arg1) when guard_clause do
  # function body
end
```

简写模式：

```
def greet_integer(value) when is_integer(value), do: "Hello #{value}"
```

哨兵子句中产生的错误并不会阻止程序运行，只会导致该子句不匹配

```
defmodule Exercise do
  def test(value) when hd(value) == 1, do: "won't match"

  def test(value), do: "match this"
end

iex> Exercise.test(1)
"match this"
```

## 自定义哨兵子句

使用`defguard`命令自定义一个哨兵子句，`defguardp`定义一个私有的哨兵子句，类似`defp`

```
defguard clause_name(arg1) when guard_clause
```

使用场景：

```
@adult_age 18

  defguard is_adult?(age) when age >= @adult_age
  defguard is_minor?(age) when age >= 0 and age < @adult_age

  def classify_user(%User{age: age} = _user) when is_adult?(age) do
    {:ok, :adult}
  end

  def classify_user(%User{age: age} = _user) when is_minor?(age) do
    {:ok, :minor}
  end
```

可以通过`import`导入自定义哨兵子句

