# 8.可枚举和流

## 可枚举（Enumerables）

我们已经学了两种可枚举类型：`lists`和`maps`。Elixir提供了`Enum`模块来处理它们。

```
iex> Enum.map([1, 2, 3], fn x -> x * 2 end)
[2, 4, 6]
iex> Enum.map(%{1 => 2, 3 => 4}, fn {k, v} -> k * v end)
[2, 12]
```

Elixir同样提供了范围：`1..3`

```
iex> Enum.map(1..3, fn x -> x * 2 end)
[2, 4, 6]
iex> Enum.reduce(1..3, 0, &+/2)
6
```

## 管道操作符`|>`

它从左侧的表达式中获得输出，并将其作为第一个参数传递给右侧的函数调用。

```
Enum.sum(Enum.filter(Enum.map(1..100_000, &(&1 * 3)), odd?))
## 等同于
1..100_000 |> Enum.map(&(&1 * 3)) |> Enum.filter(odd?) |> Enum.sum
```

## 流(Stream)

`Enum`是贪婪求值模式，意味着每个操作都将生成一个中间列表，直到达到结果。对于数据量很大的情况，贪婪求值会导致问题。

`Stream`模块是惰性求值模式，不会产生中间列表。`Stream`的每个操作返回的都是一个包含`enum`和`funs`的数据结构。
最终将该数据结构传递给`Enum`来进行运算。当处理大数据量，可能无限的集合时，流是很有用的。

使用`Enum.to_list`可以将流转换成列表









